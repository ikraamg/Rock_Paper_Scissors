<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>Rock Paper Scissors</title>
	</head>
	<body>
		<script>
			function computerPlay() {
				let randno = Math.floor(Math.random() * 3 + 1);
				switch (randno) {
					case 1:
						return "rock";
						break;
					case 2:
						return "paper";
						break;
					case 3:
						return "scissors";
						break;
					default:
						return "Random Generator Error";
				}
			}

			function playRound() {
				let computerSelection = computerPlay();
				let playerSelection = playerPrompt();
				while (playerSelection == "invalid") {
					alert("Invalid input, please try again.");
					playerSelection = playerPrompt();
				}
				if (playerSelection == computerSelection) {
					return `Draw! its ${playerSelection} and ${computerSelection}.`;
				} else if (
					(playerSelection == "rock" && computerSelection == "paper") ||
					(playerSelection == "paper" && computerSelection == "scissors") ||
					(playerSelection == "scissors" && computerSelection == "rock")
				) {
					return `Lost! ${playerSelection} lost to ${computerSelection}. Try again.`;
				} else {
					return `Won! ${playerSelection} won over ${computerSelection}. Awesome!`;
				}
			}

			function game() {
				alert("Hi!, Welcome to Rock, Paper Scissors.");
				rounds = prompt("How many rounds would you like to play?");
				if (isNaN(rounds)) {
					alert("Invalid number, rounds defaulted to 5");
					rounds = 5;
				} else {
					alert("Goodluck!");
				}

				for (let i = 0; i < rounds; i++) {
					let playGame = playRound();
					console.log(playGame);
					alert(playGame);
					if (playGame[0] == "W") {
						won = won + 1;
					} else if (playGame[0] == "L") {
						lost = lost + 1;
					} else if (playGame[0] == "D") {
						draw = draw + 1;
					} else {
						alert("Error!");
					}
				}

				let output = `You won ${won} times, you lost ${lost} times and there were ${draw} drawn games.`;
				console.log(output);
				alert(output);
			}
			function playerPrompt() {
				let userEntry = prompt("Enter rock, paper or scissors");
				userEntry = userEntry.toLowerCase();
				if (
					userEntry == "rock" ||
					userEntry == "paper" ||
					userEntry == "scissors"
				) {
					return userEntry;
				} else {
					return "invalid";
				}
			}

			let won = 0;
			let lost = 0;
			let draw = 0;
			let rounds;
			game();
		</script>
	</body>
</html>
